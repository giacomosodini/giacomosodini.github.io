%-------------------------
% Resume in LaTeX
% Customized version
%------------------------

\documentclass[a4paper,11pt]{article}
\usepackage{latexsym}
\usepackage{xcolor}
\usepackage{float}
\usepackage{ragged2e}
\usepackage[empty]{fullpage}
\usepackage{wrapfig}
\usepackage{tabularx}
\usepackage{titlesec}
\usepackage{geometry}
\usepackage{marvosym}
\usepackage{verbatim}
\usepackage{xstring}
\usepackage{enumitem}
\usepackage[hidelinks]{hyperref}
\usepackage{fancyhdr}
\usepackage{fontawesome5}
\usepackage{multicol}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{cfr-lm}
\usepackage[T1]{fontenc}
\setlength{\multicolsep}{0pt} 
\pagestyle{fancy}
\fancyhf{}
\fancyfoot{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\geometry{left=1.4cm, top=0.8cm, right=1.2cm, bottom=1cm}
\usepackage[most]{tcolorbox}
\tcbset{
	frame code={},
	center title,
	left=0pt,
	right=0pt,
	top=0pt,
	bottom=0pt,
	colback=gray!20,
	colframe=white,
	width=\dimexpr\textwidth\relax,
	enlarge left by=-2mm,
	boxsep=4pt,
	arc=0pt,outer arc=0pt,
}
\urlstyle{same}
\raggedright
\setlength{\tabcolsep}{0in}

% Section formatting
\titleformat{\section}{
  \vspace{-4pt}\scshape\raggedright\large
}{}{0em}{}[\color{black}\titlerule \vspace{-7pt}]

% Custom commands
\newcommand{\resumeItem}[2]{
  \item{
    \textbf{#1}{\hspace{0.5mm}#2 \vspace{-0.5mm}}
  }
}
\newcommand{\resumePOR}[3]{
\vspace{0.5mm}\item
    \begin{tabular*}{0.97\textwidth}[t]{l@{\extracolsep{\fill}}r}
        \textbf{#1}\hspace{0.3mm}#2 & \textit{\small{#3}} 
    \end{tabular*}
    \vspace{-2mm}
}
\newcommand{\resumeSubheading}[4]{
\vspace{0.5mm}\item
    \begin{tabular*}{0.98\textwidth}[t]{l@{\extracolsep{\fill}}r}
        \textbf{#1} & \textit{\footnotesize{#4}} \\
        \textit{\footnotesize{#3}} &  \footnotesize{#2}\\
    \end{tabular*}
    \vspace{-2.4mm}
}
\newcommand{\resumeProject}[4]{
\vspace{0.5mm}\item
    \begin{tabular*}{0.98\textwidth}[t]{l@{\extracolsep{\fill}}r}
        \textbf{#1} & \textit{\footnotesize{#3}} \\
        \footnotesize{\textit{#2}} & \footnotesize{#4}
    \end{tabular*}
    \vspace{-2.4mm}
}
\newcommand{\resumeSubItem}[2]{\resumeItem{#1}{#2}\vspace{-4pt}}

\renewcommand{\labelitemi}{$\vcenter{\hbox{\tiny$\bullet$}}$}

\newcommand{\resumeSubHeadingListStart}{\begin{itemize}[leftmargin=*,labelsep=0mm]}
\newcommand{\resumeHeadingSkillStart}{\begin{itemize}[leftmargin=*,itemsep=1.7mm, rightmargin=2ex]}
\newcommand{\resumeItemListStart}{\begin{justify}\begin{itemize}[leftmargin=3ex, rightmargin=2ex, noitemsep,labelsep=2mm,itemsep=1mm]\normalsize}

\newcommand{\resumeSubHeadingListEnd}{\end{itemize}\vspace{2mm}}
\newcommand{\resumeHeadingSkillEnd}{\end{itemize}\vspace{-2mm}}
\newcommand{\resumeItemListEnd}{\end{itemize}\end{justify}\vspace{-2mm}}
\newcommand{\cvsection}[1]{%
\vspace{2mm}
\begin{tcolorbox}
    \textbf{\large #1}
\end{tcolorbox}
    \vspace{-4mm}
}
\newcolumntype{L}{>{\raggedright\arraybackslash}X}%
\newcolumntype{R}{>{\raggedleft\arraybackslash}X}%
\newcolumntype{C}{>{\centering\arraybackslash}X}%

\newcommand{\StripFirstLast}[1]{%
  \StrGobbleLeft{#1}{1}[\tempA]% remove first character
  \StrGobbleRight{\tempA}{1}[\tempB]% remove last character
  \tempB%
}


\usepackage[style=numeric, backend=biber, sorting=order]{biblatex}

\addbibresource{../_bibliography/papers.bib}

\DeclareSourcemap{
  \maps[datatype=bibtex]{
    \map{
      \step[fieldsource=listing]
      \step[fieldset=usera, origfieldval]
    }
  }
}
\DeclareFieldFormat{labelnumber}{\StripFirstLast{\strfield{usera}}}

\DeclareDatamodelFields[type=field, datatype=integer]{order}
\DeclareDatamodelEntryfields{order}
\DeclareSortingScheme{order}{
  \sort{
    \field{order}
  }
}


\AtEveryBibitem{%
  \clearfield{url}%
  \clearfield{urldate}%
  \clearfield{eprintclass}%
  \clearfield{issn}%  
  \clearlist{langid}%  
}

\DeclareFieldFormat[preprint]{title}{\mkbibquote{#1}}

\DeclareFieldFormat[book]{title}{\mkbibquote{#1}}

\newread\myread% Get a file handle grip called \myread


\newcommand{\loaditemsfromfile}[1]{%
\IfFileExists{#1}{%
  \openin\myread=#1
  \resumeItemListStart  
    \loop\unless\ifeof\myread%
    \read\myread to \localvariable
    \ifeof\myread
    \else
    	\IfBeginWith{\localvariable}{- **}{
	\StrBetween[1,1]{\localvariable}{- **}{** -}[\thedate]%
	\StrBetween[1,1]{\localvariable}{- *"}{"* -}[\thetitle]%
	\StrBehind{\localvariable}{"* - }[\thelocation]
  \item \textbf{\thedate} \emph{\thetitle}, \thelocation
	
 }
    \fi
    \repeat
  \resumeItemListEnd % close the environment
  \closein\myread%  \close the file
}{}%
}


\usepackage{xstring}

\newread\myread
\newif\ifreadingta
\newif\ifinitemize





\usepackage{xstring}

\newread\myread
\newif\ifreadingta

\newcommand{\loaditemta}[2]{%
  \IfFileExists{#1}{%
    \openin\myread=#1
    \readingtafalse
    \loop\unless\ifeof\myread
      \read\myread to \localline
      \ifeof\myread\else

        % Attiva la sezione "Teaching Assistant"
        \IfSubStr{\expandafter\detokenize\expandafter{\localline}}{\expandafter\detokenize\expandafter{#2}}{\readingtatrue}{}%

        % Disattiva alla fine della sezione
        \IfSubStr{\expandafter\detokenize\expandafter{\localline}}{---}{%
          \readingtafalse
        }{}%
        \ifreadingta
          % Riga con nome universit√†
          \IfBeginWith{\expandafter\detokenize\expandafter{\localline}}{- **}{%
          \StrBetween[1,1]{\expandafter\detokenize\expandafter{\localline}}{- **}{**:}[\theplace]
            \vspace{-1em}\item \textbf{\theplace} \vspace{0.75em}
          }{%
            % Riga con corso
            \IfBeginWith{\expandafter\detokenize\expandafter{\localline}}{- }{%
              \StrBehind{\expandafter\detokenize\expandafter{\localline}}{- }[\course]
              \ifx\course\empty\else  \vspace{-2.25em}\resumeItemListStart \item  \course \resumeItemListEnd \fi
            }{}%
          }%
        \fi
      \fi
    \repeat
    \closein\myread
  }{%
    File not found%
  }%
}













\begin{document}
\fontfamily{cmr}\selectfont

\input{inputs/header}
\section{\textbf{Research Interests}}
\input{inputs/research_interests}
\section{\textbf{Academic Positions}}
\input{inputs/current_position}
\section{\textbf{Education}}
\input{inputs/education}
\section{\textbf{Publications}}
\input{inputs/publications}

\section{\textbf{Talks}}
\loaditemsfromfile{../_pages/activities.md}



\section{\textbf{Teaching}}

\subsection*{Lecturer}
\vspace{1em}
\begin{itemize}
\loaditemta{../_pages/teaching.md}{Lecturer}
\end{itemize}

\vspace{-2em}
\subsection*{Teaching Assistant}
\vspace{1em}
\begin{itemize}
\loaditemta{../_pages/teaching.md}{Teaching Assistant}
\end{itemize}

\vspace{2em}
\begin{center}
    \small Last updated: \today
\end{center}


\end{document}



